# Maintainer: Maurizio D'Addona <mauritiusdadd@gmail.com>

# NOTE: In order to build this package, you need the firmware for the camera
#       See the archwiki for more information on how to obtain it.

pkgname="bcwc_pcie-firmware-osx"
pkgver=1.43.2
pkgrel=1
pkgdesc="OS X firmware for the reverse engineered Linux driver for the Broadcom 1570 PCIe webcam"
url="https://github.com/patjak/bcwc_pcie"
makedepends=('git' 'cpio' )
arch=('any')
provides=("bcwc_pcie-firmware")
conflicts=("bcwc_pcie-firmware")
license=('custom')

source=("${pkgname}::git+https://github.com/patjak/bcwc_pcie.git#commit=7317a7677103655e530f614c0845c287beded723")

sha256sums=('SKIP')

build()
{
  cd "${srcdir}/${pkgname}/firmware"
  make
}

package()
{
  cd "${srcdir}/${pkgname}/firmware"
  make install DESTDIR="${pkgdir}" FW_DIR_BASE="/usr/lib/firmware"
  
  install -dm755 "${pkgdir}/usr/share/licenses/${pkgname}"
  #install -m644 "${srcdir}/Resources/English.lproj/License.rtf" \
  #              "${pkgdir}/usr/share/licenses/${pkgname}"
}
